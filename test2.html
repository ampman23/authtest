<html>
	<head>
		<script type="text/javascript" src="https://jstest.authorize.net/v1/Accept.js" charset="utf-8"></script>
	</head>
	<body>
	
		<form>
			<button type="submit" onclick="sendPaymentDataToAnet();return false;">Pay</button>
		</form>
		
		<script>
			function sendPaymentDataToAnet() {
	var secureData = {}, authData = {}, cardData = {};
	
	cardData.cardNumber = "5555555555554444";//document.getElementById('CARDNUMBER_ID').value;
	cardData.month = "12";//document.getElementById('EXPIRY_MONTH_ID').value;
	cardData.year = "2020";//document.getElementById('EXPIRY_YEAR_ID').value;
	secureData.cardData = cardData;

	authData.clientKey = '89vAVzkBEy8YF55FLp93Q72j9hD63AR53eyRpLy7Rz4g4NQ4Rq49egyqCWP3bqkx';
	authData.apiLoginID = '87fMnVr2Jc';
	secureData.authData = authData;
	console.log ("1");
	Accept.dispatchData(secureData, 'responseHandler');
			}

function responseHandler(response) {
	console.log ("2");
    if (response.messages.resultCode === 'Error') {
	    console.log ("3");
        for (var i = 0; i < response.messages.message.length; i++) {
		console.log ("4" + i);
            console.log(response.messages.message[i].code + ':' + response.messages.message[i].text);
        }
    } else {
	    console.log ("5");
        useOpaqueData(response.opaqueData)
    }
}

function useOpaqueData(responseData) {
	console.log ("6");
    // This is where you would set the data descriptor & data value to be posted back to your server
    console.log(responseData.dataDescriptor);
    console.log(responseData.dataValue);
    alert(responseData.dataValue);
}
		

		</script>

	</body>
</html>
